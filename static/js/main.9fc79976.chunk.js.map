{"version":3,"sources":["components/Property.js","components/Object.js","App.js","index.js"],"names":["Property","onChange","this","props","property","type","properties","new_key","_sort","items","react_default","a","createElement","className","name","data-value","value","data-key","placeholder","description","id","checked","required","for","class","disabled","components_Object","onUpdate","Component","PropertyObject","_this","Object","classCallCheck","possibleConstructorReturn","getPrototypeOf","call","key","obj","pr","state","onAdd","count","k","hasOwnProperty","event","target","oldv","getAttribute","i","indexOf","splice","push","additionalProperties","_this2","sortable","sort","b","map","el","components_Property","onClick","App","console","log","setState","removeKey","hobbies","label","scrubbedObj","JSON","stringify","undefined","ReactDOM","render","src_App","document","getElementById"],"mappings":"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","file":"static/js/main.9fc79976.chunk.js","sourcesContent":["import React, { Component } from 'react';\nimport Object from './Object';\n\nclass Property extends Component {\n    render() {\n        var {onChange} = this.props;\n        var property = this.props.property;\n\n        if(property.type === \"object\" && !property.properties) {\n            property[\"properties\"] = {\"new_key\": {type: \"string\", \"_sort\": 0}};\n            property[\"required\"] = [];\n        }\n\n        if(property.type === \"array\" && !property.items) {\n            property[\"items\"] = {\"type\": \"string\"};\n        }\n\n        return (\n            <div className=\"property-wrapper\">\n                <div className=\"property form-inline\">\n                    <div className=\"name form-group mr-2\">\n                        <input className=\"form-control\" name=\"_key\" data-value={this.props.name} value={this.props.name} onChange={onChange}/>\n                    </div>\n                    <div className=\"type form-group mr-2\">\n                        <select className=\"form-control\" value={this.props.property.type} data-key={this.props.name} name=\"type\" onChange={onChange}>\n                            <option value=\"string\">string</option>\n                            <option value=\"integer\">integer</option>\n                            <option value=\"number\">number</option>\n                            {/* <option value=\"array\">array</option> */}\n                            <option value=\"object\">object</option>\n                        </select>\n                    </div>\n                    <div className=\"description form-group mr-2\">\n                        <input className=\"form-control\" name=\"description\" placeholder=\"enter description\" data-key={this.props.name} value={this.props.property.description} onChange={onChange}/>\n                    </div>\n                    <div className=\"required form-check mr-2\">\n                        <input id={\"required_\"+this.props.name} className=\"form-check-input\" name=\"_required\" data-key={this.props.name} checked={this.props.required} onChange={onChange} type=\"checkbox\"/>\n                        <label for={\"required_\"+this.props.name} class=\"form-check-label\">Required</label>\n                    </div>\n                </div>\n                {this.props.property.type === \"array\" && \n                    <div className=\"property form-inline\">\n                        <div className=\"items form-group mr-2\">\n                            <input type=\"text\" disabled class=\"form-control\" value=\"items\" />\n                        </div>\n                        <div className=\"type form-group mr-2\">\n                            <select className=\"form-control\" value={this.props.property.items.type} data-key={this.props.name} name=\"items\" >\n                                <option value=\"string\">string</option>\n                                <option value=\"integer\">integer</option>\n                                <option value=\"number\">number</option>\n                                <option value=\"array\">array</option>\n                                <option value=\"object\">object</option>\n                            </select>\n                        </div>\n                    </div>\n                }\n                {this.props.property.type === \"object\" && \n                    <Object name={this.props.name} property={this.props.property} onUpdate={this.props.onUpdate}/>\n                }\n            </div>\n        );\n    }\n}\n\nexport default Property;\n","import React, { Component } from 'react';\nimport Property from './Property';\n\nclass PropertyObject extends Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            name: this.props.name || \"root\"\n        };\n    }\n\n    onUpdate = (key, obj) => {\n        var property = this.props.property;\n        var pr = this.props.property.properties;\n        pr[key] = obj;\n        property.properties = pr;\n        this.props.onUpdate(this.state.name, property);\n    }\n\n    onAdd = (key, obj) => {\n        var property = this.props.property;\n        var pr = this.props.property.properties;\n        var count = 0;\n        for (var k in pr) if (pr.hasOwnProperty(k)) ++count;\n        obj[\"_sort\"] = count;\n        pr[key] = obj;\n        property.properties = pr;\n        this.props.onUpdate(this.state.name, property);\n    }\n\n    onChange = (event) => {\n        var property = this.props.property;\n        var pr = this.props.property.properties;\n\n        if(event.target.name === \"_key\") {\n            // update old key to new key, then delete old key\n            var oldv = event.target.getAttribute('data-value');\n            var obj = pr[oldv];\n            delete pr[oldv];\n            pr[event.target.value] = obj;\n\n            // update required\n            let i = property.required.indexOf(oldv)\n            if(i > -1) {\n                property.required.splice(i, 1)\n                property.required.push(event.target.value);\n            }\n        } else if (event.target.name === \"_required\") {\n            let k = event.target.getAttribute('data-key');\n            if(event.target.checked) {\n                // add\n                property.required.push(k)\n            } else {\n                // remove\n                let i = property.required.indexOf(k)\n                if(i > -1) {\n                    property.required.splice(i, 1)\n                }\n            }\n        } else if (event.target.name === \"_additionalProperties\") {\n            property.additionalProperties = event.target.checked\n        } else {\n            let k = event.target.getAttribute('data-key');\n            pr[k][event.target.name] = event.target.value;\n\n            // cleanup object and array specific keys\n            if(event.target.name === \"type\" && event.target.value !== \"object\") {\n                delete pr[k][\"properties\"];\n                delete pr[k][\"required\"];\n                delete pr[k][\"additionalProperties\"];\n            }\n        }\n\n        property.properties = pr;\n        this.props.onUpdate(this.state.name, property);\n    }\n\n    render() {\n        var {properties} = this.props.property;\n\n        var sortable = [];\n        for (var key in properties) {\n            sortable.push([key, properties[key]]);\n        }\n\n        sortable.sort(function(a, b) {\n            return a[1][\"_sort\"] - b[1][\"_sort\"];\n        });\n\n        return (\n            <div className=\"objectWrapper\">\n                <div className=\"additionalProperties form-check mr-2\">\n                    <input id={\"additionalProperties_\"+this.props.name} className=\"form-check-input\" name=\"_additionalProperties\" checked={this.props.property.additionalProperties} onChange={this.onChange} type=\"checkbox\"/>\n                    <label for={\"additionalProperties_\"+this.props.name} class=\"form-check-label\">Additional Properties</label>\n                </div>\n                {sortable.map(function(el){\n                    return(\n                        <Property name={el[0]} property={el[1]} required={this.props.property.required.indexOf(el[0]) > -1} onChange={this.onChange} onUpdate={this.onUpdate}/>\n                    )\n                }, this)}\n                <button class=\"btn btn btn-outline-info mt-2\" onClick={() => this.onAdd(\"new_key\", {type: \"string\"})}>New Property</button>\n            </div>\n        );\n    }\n}\n\nexport default PropertyObject;","import React, { Component } from 'react';\nimport Object from './components/Object';\n\nclass App extends Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            type: \"object\",\n            properties: {\n                \"name\": {\n                    _sort: 0, // for consistent display order\n                    type: \"string\",\n                    description: \"A human name.\"\n                },\n                \"hobbies\": {\n                    _sort: 1, // for consistent display order\n                    type: \"object\",\n                    description: \"A human's hobbies.\",\n                    properties: {\n                        \"label\": {\n                            _sort: 0,\n                            type: \"string\"\n                        }\n                    },\n                    required: []\n                }\n            },\n            required: []\n         };\n    }\n\n    onUpdate = (key, obj) => {\n        console.log(\"UPDATE\");\n        console.log(key);\n        console.log(obj);\n        this.setState({\n            properties: obj.properties\n        });\n    }\n\n    removeKey = (key, obj) => {\n        for(var k in obj) {\n            delete obj[k][key];\n            if(obj[k].type === \"object\") {\n                obj[k].properties = this.removeKey(key, obj[k].properties)\n            }\n        }\n        return obj\n    }\n\n    render() {\n        let scrubbedObj = this.state\n        scrubbedObj.properties = this.removeKey(\"_sort\", scrubbedObj.properties)\n        return (\n            <div class=\"container-fluid\">\n                <div class=\"row\">\n                    <div class=\"col-7\">\n                        <Object onUpdate={this.onUpdate} property={this.state} />\n                    </div>\n                    <div class=\"col-5\">\n                        <pre>\n                            <code>\n                            {JSON.stringify(scrubbedObj, undefined, 4)}\n                            </code>\n                        </pre>\n                    </div>\n                </div>\n            </div>\n        );\n    }\n}\n\nexport default App;","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\n\nReactDOM.render(<App />, document.getElementById('root'));\n"],"sourceRoot":""}